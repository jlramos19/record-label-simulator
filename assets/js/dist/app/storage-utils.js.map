{"version":3,"file":"storage-utils.js","sourceRoot":"","sources":["../../../../src/app/storage-utils.ts"],"names":[],"mappings":"AAAA,MAAM,UAAU,oBAAoB,CAAC,KAAK;IACxC,IAAI,CAAC,KAAK;QAAE,OAAO,KAAK,CAAC;IACzB,IAAI,KAAK,CAAC,IAAI,KAAK,oBAAoB;QAAE,OAAO,IAAI,CAAC;IACrD,IAAI,KAAK,CAAC,IAAI,KAAK,4BAA4B;QAAE,OAAO,IAAI,CAAC;IAC7D,IAAI,KAAK,CAAC,IAAI,KAAK,EAAE,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI;QAAE,OAAO,IAAI,CAAC;IAC1D,MAAM,OAAO,GAAG,OAAO,KAAK,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IACrF,OAAO,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AACnC,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAC,KAAK;IACtC,IAAI,CAAC,KAAK;QAAE,OAAO,CAAC,CAAC;IACrB,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AAC1B,CAAC;AAED,MAAM,UAAU,oBAAoB,CAAC,OAAO;IAC1C,IAAI,CAAC,OAAO;QAAE,OAAO,CAAC,CAAC;IACvB,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE,CAAC;QAChC,OAAO,IAAI,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;IAClC,CAAC;IACD,OAAO,kBAAkB,CAAC,OAAO,CAAC,CAAC;AACrC,CAAC;AAED,MAAM,UAAU,yBAAyB,CAAC,OAAO,GAAG,OAAO,YAAY,KAAK,WAAW,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI;IAC3G,IAAI,CAAC,OAAO;QAAE,OAAO,CAAC,CAAC;IACvB,IAAI,CAAC;QACH,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;YAC3C,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,GAAG;gBAAE,SAAS;YACnB,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YACzC,KAAK,IAAI,GAAG,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QACrC,CAAC;QACD,OAAO,KAAK,GAAG,CAAC,CAAC;IACnB,CAAC;IAAC,MAAM,CAAC;QACP,OAAO,CAAC,CAAC;IACX,CAAC;AACH,CAAC","sourcesContent":["export function isQuotaExceededError(error) {\n  if (!error) return false;\n  if (error.name === \"QuotaExceededError\") return true;\n  if (error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") return true;\n  if (error.code === 22 || error.code === 1014) return true;\n  const message = typeof error.message === \"string\" ? error.message.toLowerCase() : \"\";\n  return message.includes(\"quota\");\n}\n\nexport function estimateUtf16Bytes(value) {\n  if (!value) return 0;\n  return value.length * 2;\n}\n\nexport function estimatePayloadBytes(payload) {\n  if (!payload) return 0;\n  if (typeof Blob !== \"undefined\") {\n    return new Blob([payload]).size;\n  }\n  return estimateUtf16Bytes(payload);\n}\n\nexport function estimateLocalStorageBytes(storage = typeof localStorage !== \"undefined\" ? localStorage : null) {\n  if (!storage) return 0;\n  try {\n    let total = 0;\n    for (let i = 0; i < storage.length; i += 1) {\n      const key = storage.key(i);\n      if (!key) continue;\n      const value = storage.getItem(key) || \"\";\n      total += key.length + value.length;\n    }\n    return total * 2;\n  } catch {\n    return 0;\n  }\n}\n"]}